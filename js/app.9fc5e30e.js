(function(e){function t(t){for(var s,r,o=t[0],u=t[1],c=t[2],d=0,m=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(s in u)Object.prototype.hasOwnProperty.call(u,s)&&(e[s]=u[s]);l&&l(t);while(m.length)m.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],s=!0,o=1;o<n.length;o++){var u=n[o];0!==i[u]&&(s=!1)}s&&(a.splice(t--,1),e=r(r.s=n[0]))}return e}var s={},i={app:0},a=[];function r(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=s,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(n,s,function(t){return e[t]}.bind(null,s));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"11fa":function(e,t,n){"use strict";n("5e4e")},1304:function(e,t,n){},"20c2":function(e,t,n){},"3da8":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var s=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"root"},[n("router-view",{staticClass:"main"}),e._m(0)],1)},a=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"footer"},[n("div",{staticClass:"footer__text"},[e._v("© Copyright 2021"),n("a",{staticClass:"footer__link",attrs:{href:"https://artemisdev.xyz",target:"_blank"}},[e._v("Artemis")]),e._v(".")])])}],r=(n("cf25"),n("2877")),o={},u=Object(r["a"])(o,i,a,!1,null,null,null),c=u.exports,l=n("9483");Object(l["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var d=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"intro"},[n("img",{staticClass:"logo",attrs:{src:"/img/logo.svg"}}),n("h1",{staticClass:"header"},[e._v("Blitz.Red")]),n("h2",{staticClass:"subheader"},[e._v("The live online game timer for competitive 1v1s")]),n("router-link",{staticClass:"button",attrs:{to:"/create"}},[e._v("Create a Timer")]),n("p",{staticClass:"status"},[e._v(e._s(e.stats.ongoingTimers)+" ongoing timers • "+e._s(e.stats.allTimers)+" all time • "+e._s(e.stats.connected)+" people online")])],1)},p=[],f=n("f972");const h=new f["a"]("https://api.blitz.red");var v={name:"Home",data(){return{stats:{ongoingTimers:"?",allTimers:"?",connected:"?"}}},created(){h.getStats().then(e=>{this.stats=e})}},_=v,g=(n("af13"),Object(r["a"])(_,m,p,!1,null,"195d8a86",null)),b=g.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"create"},[n("h1",[e._v("Create a Timer")]),e._l(e.stages,(function(t,s){return n("section",{staticClass:"stage"},[n("StageSettings",{attrs:{stage:t,expanded:s===e.expandedStage,idx:s},on:{expandStage:function(t){e.expandedStage=s},removeStage:function(t){return e.stages.splice(s,1)}}})],1)})),n("div",{staticClass:"add_stage",on:{click:e.addStage}},[e._v("+")]),n("div",{staticClass:"as_player_input"},[n("span",[e._v("Join as Player 1?")]),n("Checkbox",{attrs:{type:"checkbox"},model:{value:e.asPlayer,callback:function(t){e.asPlayer=t},expression:"asPlayer"}})],1),n("button",{staticClass:"button",on:{click:e.start}},[e._v("Start")])],2)},x=[];function C(e){const t=new RegExp(`^ *${e} *= *(.*)`),n=document.cookie.split(";");for(const s of n){const e=s.match(t);if(e)return e[1]}}function k(e,t,{daysLasts:n=30}={}){const s=new Date;s.setTime(s.getTime()+864e5*n),document.cookie=`${e}=${t}; expires=${s.toUTCString()}; SameSite=Strict; Path=/`}function y(e,t){k(`timer-${e.timer}-token`,e.token),k(`timer-${e.timer}-side`,t)}function S(e){const t=C(`timer-${e}-token`);return new f["c"]({timer:e,token:t},"https://api.blitz.red")}function $(e){return Number.parseInt(C(`timer-${e}-side`))}var w=n("1315"),P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{attrs:{for:"checkbox-"+e._uid}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],staticClass:"hidden_checkbox",attrs:{type:"checkbox",id:"checkbox-"+e._uid},domProps:{checked:Array.isArray(e.inputValue)?e._i(e.inputValue,null)>-1:e.inputValue},on:{input:function(t){return e.$emit("input",t.target.checked)},change:function(t){var n=e.inputValue,s=t.target,i=!!s.checked;if(Array.isArray(n)){var a=null,r=e._i(n,a);s.checked?r<0&&(e.inputValue=n.concat([a])):r>-1&&(e.inputValue=n.slice(0,r).concat(n.slice(r+1)))}else e.inputValue=i}}}),n("div",{staticClass:"input"})])},j=[],O={props:["value"],data:function(){return{inputValue:this.value}}},I=O,E=(n("11fa"),Object(r["a"])(I,P,j,!1,null,"0243d3ef",null)),N=E.exports,M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.expanded?n("table",{staticClass:"stage stage--expanded"},[n("tr",{staticClass:"stage__header"},[n("td",[n("span",[e._v("Stage "+e._s(e.idx+1)+" - Turn "+e._s(e.stage.startTurn))])]),0!==e.idx?n("td",{staticClass:"remove_btn"},[n("span",{on:{click:function(t){return e.$emit("removeStage")}}},[e._v("-")])]):n("td",{staticClass:"placeholder"})]),0!==e.idx?n("tr",[e._m(0),n("td",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.stage.startTurn,expression:"stage.startTurn"}],staticClass:"number_input",attrs:{type:"number"},domProps:{value:e.stage.startTurn},on:{input:function(t){t.target.composing||e.$set(e.stage,"startTurn",t.target.value)}}})])]):e._e(),n("tr",[e._m(1),n("td",[n("TimeInput",{model:{value:e.stage.initialTime,callback:function(t){e.$set(e.stage,"initialTime",t)},expression:"stage.initialTime"}})],1)]),n("tr",[e._m(2),n("td",[n("TimeInput",{model:{value:e.stage.incrementPerTurn,callback:function(t){e.$set(e.stage,"incrementPerTurn",t)},expression:"stage.incrementPerTurn"}})],1)]),n("tr",[e._m(3),n("td",[n("TimeInput",{model:{value:e.stage.fixedTimePerTurn,callback:function(t){e.$set(e.stage,"fixedTimePerTurn",t)},expression:"stage.fixedTimePerTurn"}})],1)])]):n("div",{staticClass:"stage stage--collapsed stage__header"},[n("span",{on:{click:function(t){return e.$emit("expandStage")}}},[e._v("Stage "+e._s(e.idx+1)+" - Turn "+e._s(e.stage.startTurn))]),0!==e.idx?n("span",{staticClass:"remove_btn",on:{click:function(t){return e.$emit("removeStage")}}},[e._v("-")]):e._e()])},D=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",[n("span",[e._v("Start Turn")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",[n("span",[e._v("Initial Time")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",[n("span",[e._v("Increase per Turn")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("td",[n("span",[e._v("Fixed per Turn")])])}],V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"time_input"},[n("DigitInput",{on:{input:e.onInput},model:{value:e.tenHours,callback:function(t){e.tenHours=t},expression:"tenHours"}}),n("DigitInput",{on:{input:e.onInput},model:{value:e.hours,callback:function(t){e.hours=t},expression:"hours"}}),e._v("h"),n("DigitInput",{attrs:{max:5},on:{input:e.onInput},model:{value:e.tenMinutes,callback:function(t){e.tenMinutes=t},expression:"tenMinutes"}}),n("DigitInput",{on:{input:e.onInput},model:{value:e.minutes,callback:function(t){e.minutes=t},expression:"minutes"}}),e._v("m"),n("DigitInput",{attrs:{max:5},on:{input:e.onInput},model:{value:e.tenSeconds,callback:function(t){e.tenSeconds=t},expression:"tenSeconds"}}),n("DigitInput",{on:{input:e.onInput},model:{value:e.seconds,callback:function(t){e.seconds=t},expression:"seconds"}}),e._v("s")],1)},z=[],A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("input",{directives:[{name:"model",rawName:"v-model.number",value:e.inputValue,expression:"inputValue",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",max:e.max},domProps:{value:e.inputValue},on:{keydown:e.update,input:function(t){t.target.composing||(e.inputValue=e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}})},R=[],H={props:{value:Number,max:{type:Number,default:9}},data:function(){return{inputValue:this.value}},methods:{update(e){const t=e.keyCode?e.keyCode:e.which;t<48||t>48+this.max||(this.inputValue=t-48,this.$emit("input",t-48)),e.preventDefault()}}},U=H,F=(n("fa62"),Object(r["a"])(U,A,R,!1,null,"256a189a",null)),J=F.exports,L={name:"TimeInput",components:{DigitInput:J},data:function(){const e=this.value.shiftTo("hours","minutes","seconds").toObject();return{tenHours:Math.floor(e.hours/10),hours:e.hours%10,tenMinutes:Math.floor(e.minutes/10),minutes:e.minutes%10,tenSeconds:Math.floor(e.seconds/10),seconds:e.seconds%10}},props:["value"],methods:{onInput(){const e=document.activeElement.nextElementSibling;e&&e.focus(),this.$emit("input",w["Duration"].fromObject({seconds:10*this.tenSeconds+this.seconds,minutes:10*this.tenMinutes+this.minutes,hours:10*this.tenHours+this.hours}))}}},B=L,q=Object(r["a"])(B,V,z,!1,null,null,null),G=q.exports,Y={props:["stage","idx","expanded"],components:{TimeInput:G}},K=Y,Q=(n("57e4"),Object(r["a"])(K,M,D,!1,null,"f3889216",null)),W=Q.exports;const X=new f["a"]("https://api.blitz.red");var Z={name:"Create",components:{Checkbox:N,StageSettings:W},data(){return{stages:[{startTurn:0,fixedTimePerTurn:w["Duration"].fromMillis(0),incrementPerTurn:w["Duration"].fromMillis(3e4),initialTime:w["Duration"].fromMillis(18e5)}],asPlayer:!0,expandedStage:0}},methods:{async start(){const e=this.stages.map(f["b"].create),t=await X.createTimer(e,!this.asPlayer);y(t,this.asPlayer?0:-1),this.$router.push("/timer/"+t.timer)},addStage(){this.stages.push({startTurn:this.stages[this.stages.length-1].startTurn+10,fixedTimePerTurn:w["Duration"].fromMillis(0),incrementPerTurn:w["Duration"].fromMillis(0),initialTime:w["Duration"].fromMillis(0)})}}},ee=Z,te=(n("61b4"),Object(r["a"])(ee,T,x,!1,null,"b7ea47dc",null)),ne=te.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"timer"},[e.timer.turnNumber>=0?n("h1",{staticClass:"title"},[e._v("Turn "+e._s(Math.floor(e.timer.turnNumber/2)))]):n("h1",{staticClass:"title"},[e._v("Not Started")]),n("div",{staticClass:"sides"},[n("TimerSide",{attrs:{side:e.timer.home,number:0,isUser:0===e.side}}),n("TimerSide",{attrs:{side:e.timer.away,number:1,isUser:1===e.side}})],1),n("span",[e._v(e._s(e.timer.observers)+" observers")]),n("span",[e._v("This link can be used to observe:")]),n("Copyable",{attrs:{content:e.link}})],1)},ie=[],ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"side"},[n("h2",{staticClass:"title"},[e._v("Player "+e._s(e.number+1)),e.side&&!e.side.connected?n("span",{staticClass:"alert"},[e._v(" - Not Connected")]):e._e(),e.isUser?n("span",{staticClass:"alert"},[e._v(" - You")]):e._e()]),e.side?n("div",{staticClass:"side__timer"},[n("span",{staticClass:"side__timer__title"},[e._v("Turn Timer")]),n("Clock",{attrs:{value:e.side.turnTimeRemaining,size:e.side.isTurn?e.side.turnTimeRemaining?"big":"small":"medium"}}),n("span",{staticClass:"side__timer__title"},[e._v("Game Timer")]),n("Clock",{attrs:{value:e.side.totalTimeRemaining,size:e.side.isTurn?e.side.turnTimeRemaining?"small":"big":"medium"}})],1):n("div",{staticClass:"side__invite"},[n("h3",{staticClass:"side__invite__title"},[e._v("Not Joined")]),n("p",{staticClass:"side__invite__description"},[e._v("This link can be used to join:")]),n("Copyable",{attrs:{content:e.link}})],1)])},re=[],oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"clock",class:"clock--"+e.size},[e.hours?n("span",{staticClass:"numbers"},[e._v(e._s(e.hours)+":")]):e._e(),n("span",{staticClass:"numbers"},[e._v(e._s(e.minutes)+":")]),n("span",{staticClass:"numbers"},[e._v(e._s(e.seconds))])])},ue=[],ce={name:"TimeInput",props:["value","size"],data:function(){const e=this.value.shiftTo("hours","minutes","seconds").toObject();return{hours:e.hours?e.hours.toString().padStart(2,"0"):null,minutes:e.minutes.toString().padStart(2,"0"),seconds:e.seconds.toString().padStart(2,"0")}}},le=ce,de=(n("ebc2"),Object(r["a"])(le,oe,ue,!1,null,"3ebaa336",null)),me=de.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"content",on:{click:e.copy}},[e._v(e._s(e.displayContent))])},fe=[],he={props:["content"],data:function(){return{displayContent:this.content}},methods:{copy(){navigator.clipboard.writeText(this.content),this.displayContent="Copied!",setTimeout(()=>{this.displayContent=this.content},500)}}},ve=he,_e=(n("e057"),Object(r["a"])(ve,pe,fe,!1,null,"1389cb54",null)),ge=_e.exports,be={components:{Clock:me,Copyable:ge},props:["side","number","isUser"],data:function(){const e=this.$route.params.id;return{link:`${window.location.origin}/t/${e}/${this.number}`}}},Te=be,xe=(n("6489"),Object(r["a"])(Te,ae,re,!1,null,"4c380945",null)),Ce=xe.exports,ke={name:"Timer",components:{TimerSide:Ce,Copyable:ge},data(){const e=S(this.$route.params.id);e.addListener("error",this.onError),e.addListener("state_update",this.onState),e.connect();const t=this.$route.params.id,n=$(t);return{socket:e,timer:{home:null,away:null,observers:0,turnNumber:0},side:n,link:`${window.location.origin}/t/${t}`}},beforeRouteUpdate(e,t,n){this.socket.connect(),n()},beforeRouteLeave(e,t,n){this.socket.disconnect(),n()},methods:{onError(e){console.log(e)},onState(e){this.timer=e}}},ye=ke,Se=(n("9ab2"),Object(r["a"])(ye,se,ie,!1,null,"75ef4c98",null)),$e=Se.exports;s["a"].use(d["a"]);const we=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Home",component:b},{path:"/create",name:"Create",component:ne},{path:"/timer/:id",name:"Timer",component:$e},{path:"/t/:id/:side?",name:"JoinLink",async beforeEnter(e,t,n){const s=Number.parseInt(e.params.id);if(!s)return n({name:"Not Found"});let i=e.params.side;if(!["0","1",void 0].includes(i))return n({name:"Not Found"});const a=new f["a"]("https://api.blitz.red"),r=await a.getTimer(s);if(!r)return n({name:"Not Found"});if(("0"===e.params.side&&r.home||"1"===e.params.side&&r.away)&&(i=void 0),void 0!==i){const e=await a.joinTimer(s,Number.parseInt(i));y(e,i)}n({path:"/timer/"+s})}}]});var Pe=we;s["a"].config.productionTip=!1,new s["a"]({router:Pe,render:function(e){return e(c)}}).$mount("#app")},"57e4":function(e,t,n){"use strict";n("7641")},"5e4e":function(e,t,n){},"61b4":function(e,t,n){"use strict";n("d4c6")},6489:function(e,t,n){"use strict";n("3da8")},"6cb8":function(e,t,n){},7641:function(e,t,n){},"9ab2":function(e,t,n){"use strict";n("20c2")},af13:function(e,t,n){"use strict";n("deaa")},cf25:function(e,t,n){"use strict";n("fea6")},d4c6:function(e,t,n){},deaa:function(e,t,n){},e057:function(e,t,n){"use strict";n("1304")},ebc2:function(e,t,n){"use strict";n("efd6")},efd6:function(e,t,n){},fa62:function(e,t,n){"use strict";n("6cb8")},fea6:function(e,t,n){}});
//# sourceMappingURL=app.9fc5e30e.js.map